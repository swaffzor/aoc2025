import { extractDataToGraph, readInputForDay } from "../utils";
import { countSplits, day7part1 } from "./solution";
const diagramStart = `.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;

const diagram1Beam = `.......S.......
.......|.......
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;

const diagram2Beams = `.......S.......
.......|.......
......|^|......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;

const diagram2BeamsPost = `.......S.......
.......|.......
......|^|......
......|.|......
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;

const diagram3Beams = `.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;
const diagram3BeamsPost = `.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
.....|.|.|.....
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;

const diagramSampleEndPre = `.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
.....|.|.|.....
....|^|^|^|....
....|.|.|.|....
...|^|^|||^|...
...|.|.|||.|...
..|^|^|||^|^|..
..|.|.|||.|.|..
.|^|||^||.||^|.
.|.|||.||.||.|.
|^|^|^|^|^|||^|
...............`;

const diagramSampleEnd = `.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
.....|.|.|.....
....|^|^|^|....
....|.|.|.|....
...|^|^|||^|...
...|.|.|||.|...
..|^|^|||^|^|..
..|.|.|||.|.|..
.|^|||^||.||^|.
.|.|||.||.||.|.
|^|^|^|^|^|||^|
|.|.|.|.|.|||.|`;

const diagramRow15 = `.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
.....|.|.|.....
....|^|^|^|....
....|.|.|.|....
...|^|^|||^|...
...|.|.|||.|...
..|^|^|||^|^|..
..|.|.|||.|.|..
.|^|||^||.||^|.
.|.|||.||.||.|.
.^.^.^.^.^...^.
...............`;

describe("day7", () => {
  describe("part1", () => {
    it.each([
      [15, diagramSampleEndPre, diagramSampleEnd],
      [0, diagramStart, diagram1Beam],
      [1, diagram1Beam, diagram1Beam],
      [2, diagram1Beam, diagram2Beams],
      [3, diagram2Beams, diagram2BeamsPost],
      [4, diagram2BeamsPost, diagram3Beams],
    ])("countSplits: digram rowIndex=%i", (rowIndex, diagram, expected) => {
      const graph = extractDataToGraph<string>(diagram);
      console.log(diagram);
      expect(countSplits({ graph, rowIndex }).diagram).toEqual(expected);
    });

    it.each([
      [0, 0],
      [1, 0],
      [2, 2],
      [3, 0],
      [4, 3],
      [5, 0],
      [6, 4],
      [7, 0],
      [8, 5],
      [9, 0],
      [10, 6],
      [11, 0],
      [12, 6],
      [13, 0],
      [14, 8],
      [15, 0],
    ])("countSplits: count rowIndex:%i => %i", (rowIndex, expected) => {
      const graph = extractDataToGraph<string>(diagramStart);
      console.log(diagramStart);
      expect(countSplits({ graph, rowIndex }).count).toEqual(expected);
    });

    it.only("solution", () => {
      expect(day7part1(readInputForDay(7, true))).toEqual(21);
      console.log("day7part1 ANSWER:", day7part1(readInputForDay(7)));
    });
  });

  // it("part2 solution", () => {
  //   expect(day7part2(readInputForDay(7, true))).toEqual(3263827);
  //   console.log("day7part2 ANSWER:", day7part2(readInputForDay(7)));
  // });
});
